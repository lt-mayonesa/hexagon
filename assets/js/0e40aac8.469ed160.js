"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[5961],{5640:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"advanced/action-execution","title":"Action Execution Deep Dive","description":"This guide explains how Hexagon resolves and executes tool actions. Understanding this will help you debug issues and design better tools.","source":"@site/docs/advanced/action-execution.md","sourceDirName":"advanced","slug":"/advanced/action-execution","permalink":"/hexagon/docs/advanced/action-execution","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/advanced/action-execution.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"tutorialSidebar","previous":{"title":"Prompting System","permalink":"/hexagon/docs/advanced/prompting"},"next":{"title":"Hooks","permalink":"/hexagon/docs/advanced/hooks"}}');var l=i(4848),o=i(8453);const r={sidebar_position:5},t="Action Execution Deep Dive",c={},d=[{value:"Overview",id:"overview",level:2},{value:"Execution Flow Diagram",id:"execution-flow-diagram",level:2},{value:"Tier 1: Script File Detection",id:"tier-1-script-file-detection",level:2},{value:"How It Works",id:"how-it-works",level:3},{value:"Resolution Process",id:"resolution-process",level:3},{value:"Environment Variables Set",id:"environment-variables-set",level:3},{value:"Argument Passing",id:"argument-passing",level:3},{value:"Tier 2: Python Module Import",id:"tier-2-python-module-import",level:2},{value:"How It Works",id:"how-it-works-1",level:3},{value:"Module Requirements",id:"module-requirements",level:3},{value:"Optional Args Class",id:"optional-args-class",level:3},{value:"Module Discovery",id:"module-discovery",level:3},{value:"Import Failure Handling",id:"import-failure-handling",level:3},{value:"Tier 3: Inline Command Execution",id:"tier-3-inline-command-execution",level:2},{value:"How It Works",id:"how-it-works-2",level:3},{value:"Format String Substitution",id:"format-string-substitution",level:3},{value:"Multiple Commands",id:"multiple-commands",level:3},{value:"Shell Execution",id:"shell-execution",level:3},{value:"Environment-Specific Actions",id:"environment-specific-actions",level:2},{value:"Action Resolution Examples",id:"action-resolution-examples",level:2},{value:"Example 1: Script File",id:"example-1-script-file",level:3},{value:"Example 2: Python Module (Custom)",id:"example-2-python-module-custom",level:3},{value:"Example 3: Python Module (Built-in)",id:"example-3-python-module-built-in",level:3},{value:"Example 4: Inline Command",id:"example-4-inline-command",level:3},{value:"Example 5: Format String",id:"example-5-format-string",level:3},{value:"Debugging Action Resolution",id:"debugging-action-resolution",level:2},{value:"Add Debug Output",id:"add-debug-output",level:3},{value:"Check Module Import",id:"check-module-import",level:3},{value:"Verify Script Path",id:"verify-script-path",level:3},{value:"Enable Python Verbosity",id:"enable-python-verbosity",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Choose the Right Action Type",id:"choose-the-right-action-type",level:3},{value:"Naming Conventions",id:"naming-conventions",level:3},{value:"Error Handling",id:"error-handling",level:3},{value:"Path Management",id:"path-management",level:3},{value:"See Also",id:"see-also",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"action-execution-deep-dive",children:"Action Execution Deep Dive"})}),"\n",(0,l.jsx)(n.p,{children:"This guide explains how Hexagon resolves and executes tool actions. Understanding this will help you debug issues and design better tools."}),"\n",(0,l.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,l.jsxs)(n.p,{children:["When you define a tool with an ",(0,l.jsx)(n.code,{children:"action"}),", Hexagon uses a three-tier strategy to determine how to execute it:"]}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Script File Detection"})," - Check if it's a file with a known extension"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Python Module Import"})," - Try to import as a Python module"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Inline Command Execution"})," - Execute as a shell command"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"This flexible approach lets you use different action types without explicitly declaring which type each is."}),"\n",(0,l.jsx)(n.h2,{id:"execution-flow-diagram",children:"Execution Flow Diagram"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:'User runs: mycli deploy prod\n        \u2193\nTool selected: deploy\nEnvironment selected: prod\n        \u2193\nRead action: "./scripts/deploy.sh"\n        \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 TIER 1: Script File Detection  \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 Has file extension? (.sh, .js) \u2502\n\u2502 \u2713 YES \u2192 Execute with interpreter \u2502\n\u2502 \u2717 NO  \u2192 Continue to Tier 2     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n        \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 TIER 2: Python Module Import   \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 Try import from custom_tools_dir\u2502\n\u2502 Then try hexagon.actions.external\u2502\n\u2502 \u2713 Found \u2192 Call main() function \u2502\n\u2502 \u2717 Not found \u2192 Continue to Tier 3\u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n        \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 TIER 3: Inline Command         \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 Apply format string substitution\u2502\n\u2502 Execute with shell              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n'})}),"\n",(0,l.jsx)(n.h2,{id:"tier-1-script-file-detection",children:"Tier 1: Script File Detection"}),"\n",(0,l.jsx)(n.h3,{id:"how-it-works",children:"How It Works"}),"\n",(0,l.jsx)(n.p,{children:"Hexagon checks if the action has a recognized file extension:"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Supported extensions:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:".sh"})," \u2192 executes with ",(0,l.jsx)(n.code,{children:"sh"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:".js"})," \u2192 executes with ",(0,l.jsx)(n.code,{children:"node"})]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Example:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"tools:\n  - name: deploy\n    action: ./scripts/deploy.sh  # Detected as shell script\n"})}),"\n",(0,l.jsx)(n.h3,{id:"resolution-process",children:"Resolution Process"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Extract file extension from action string"}),"\n",(0,l.jsxs)(n.li,{children:["If extension matches known type, determine interpreter:","\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'interpreters = {\n    ".sh": "sh",\n    ".js": "node"\n}\n'})}),"\n"]}),"\n",(0,l.jsx)(n.li,{children:"Resolve path relative to project directory"}),"\n",(0,l.jsxs)(n.li,{children:["Execute: ",(0,l.jsx)(n.code,{children:"{interpreter} {script_path} {args}"})]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"environment-variables-set",children:"Environment Variables Set"}),"\n",(0,l.jsx)(n.p,{children:"Scripts receive special environment variables:"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"HEXAGON_EXECUTION_TOOL"})," - Tool configuration as JSON:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"#!/bin/bash\nTOOL_NAME=$(echo $HEXAGON_EXECUTION_TOOL | jq -r '.name')\necho \"Running tool: $TOOL_NAME\"\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"HEXAGON_EXECUTION_ENV"})," - Environment configuration as JSON:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"ENV_NAME=$(echo $HEXAGON_EXECUTION_ENV | jq -r '.name')\necho \"Environment: $ENV_NAME\"\n"})}),"\n",(0,l.jsx)(n.h3,{id:"argument-passing",children:"Argument Passing"}),"\n",(0,l.jsx)(n.p,{children:"Arguments are passed to scripts in order:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"env_args"})," (from ",(0,l.jsx)(n.code,{children:"tool.envs[env.name]"}),")"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"cli_args"})," (extra command-line arguments)"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Example:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"tools:\n  - name: backup\n    action: ./scripts/backup.sh\n    envs:\n      dev: /data/dev\n      prod: /data/prod\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"$ mycli backup dev --full\n# Script receives:\n# $1 = /data/dev  (env_args)\n# $2 = --full     (cli_args)\n"})}),"\n",(0,l.jsx)(n.h2,{id:"tier-2-python-module-import",children:"Tier 2: Python Module Import"}),"\n",(0,l.jsx)(n.h3,{id:"how-it-works-1",children:"How It Works"}),"\n",(0,l.jsx)(n.p,{children:"If no file extension is detected, Hexagon tries to import the action as a Python module."}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Search order:"})}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"{custom_tools_dir}/{action}.py"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"hexagon.actions.external.{action}"})}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Example:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"cli:\n  custom_tools_dir: ./custom_tools\n\ntools:\n  - name: analyze\n    action: data_analyzer  # Looks for custom_tools/data_analyzer.py\n"})}),"\n",(0,l.jsx)(n.h3,{id:"module-requirements",children:"Module Requirements"}),"\n",(0,l.jsxs)(n.p,{children:["The module must have a ",(0,l.jsx)(n.code,{children:"main()"})," function:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'# custom_tools/data_analyzer.py\n\ndef main(tool, env, env_args, cli_args):\n    """\n    Main entry point for the tool.\n\n    Args:\n        tool: ActionTool object from YAML\n        env: Selected Env object (or None)\n        env_args: Value from tool.envs[env.name]\n        cli_args: Parsed CLI arguments\n    """\n    # Your code here\n    return ["Analysis complete"]\n'})}),"\n",(0,l.jsx)(n.h3,{id:"optional-args-class",children:"Optional Args Class"}),"\n",(0,l.jsxs)(n.p,{children:["Modules can define an ",(0,l.jsx)(n.code,{children:"Args"})," class for custom argument parsing:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'from hexagon.support.input.args import ToolArgs, PositionalArg, Arg\n\nclass Args(ToolArgs):\n    file_path: PositionalArg[str] = Arg(\n        None,\n        prompt_message="Enter file path"\n    )\n\ndef main(tool, env, env_args, cli_args: Args):\n    # cli_args is now typed as Args\n    file_path = cli_args.file_path.value\n    # ...\n'})}),"\n",(0,l.jsx)(n.h3,{id:"module-discovery",children:"Module Discovery"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Location 1: custom_tools_dir"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"project/\n\u251c\u2500\u2500 app.yaml\n\u2514\u2500\u2500 custom_tools/\n    \u251c\u2500\u2500 data_analyzer.py      # Found!\n    \u2514\u2500\u2500 report_generator.py\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Location 2: Built-in actions"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"# Hexagon looks in hexagon/actions/external/\nhexagon.actions.external.open_link  # Built-in action\n"})}),"\n",(0,l.jsx)(n.h3,{id:"import-failure-handling",children:"Import Failure Handling"}),"\n",(0,l.jsx)(n.p,{children:"If import fails, Hexagon continues to Tier 3 (inline command)."}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Debug import issues:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'# Add to your custom tool\nprint("Module loaded successfully!")\n\ndef main(tool, env, env_args, cli_args):\n    print(f"Executing {tool.name}")\n'})}),"\n",(0,l.jsx)(n.h2,{id:"tier-3-inline-command-execution",children:"Tier 3: Inline Command Execution"}),"\n",(0,l.jsx)(n.h3,{id:"how-it-works-2",children:"How It Works"}),"\n",(0,l.jsx)(n.p,{children:"If the action isn't a script file or Python module, it's executed as a shell command."}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Example:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"tools:\n  - name: status\n    action: git status  # Executed as shell command\n"})}),"\n",(0,l.jsx)(n.h3,{id:"format-string-substitution",children:"Format String Substitution"}),"\n",(0,l.jsx)(n.p,{children:"Inline commands support format strings for dynamic values:"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Available variables:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"{tool.name}"})," - Tool name"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"{tool.alias}"})," - Tool alias"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"{tool.type}"})," - Tool type"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"{tool.action}"})," - Tool action string"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"{env.name}"})," - Environment name"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"{env.alias}"})," - Environment alias"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"{env_args}"})," - Environment-specific value"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"{cli_args}"})," - Extra CLI arguments (space-separated)"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Example:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:'tools:\n  - name: deploy\n    action: "echo Deploying {tool.name} to {env.name} at {env_args}"\n    envs:\n      dev: "localhost:3000"\n      prod: "prod.example.com"\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"$ mycli deploy prod\n# Executes: echo Deploying deploy to prod at prod.example.com\n"})}),"\n",(0,l.jsx)(n.h3,{id:"multiple-commands",children:"Multiple Commands"}),"\n",(0,l.jsx)(n.p,{children:"Actions can be lists of commands:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:'tools:\n  - name: setup\n    action:\n      - "echo \'Step 1: Install dependencies\'"\n      - "npm install"\n      - "echo \'Step 2: Build project\'"\n      - "npm run build"\n'})}),"\n",(0,l.jsx)(n.p,{children:"Commands are joined with newlines and executed as a single script:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"echo 'Step 1: Install dependencies'\nnpm install\necho 'Step 2: Build project'\nnpm run build\n"})}),"\n",(0,l.jsx)(n.h3,{id:"shell-execution",children:"Shell Execution"}),"\n",(0,l.jsx)(n.p,{children:"Commands are executed with:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"subprocess.run(command, shell=True)\n"})}),"\n",(0,l.jsx)(n.p,{children:"This means you have access to:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Shell features (pipes, redirects, etc.)"}),"\n",(0,l.jsx)(n.li,{children:"Environment variables"}),"\n",(0,l.jsx)(n.li,{children:"Current working directory"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"environment-specific-actions",children:"Environment-Specific Actions"}),"\n",(0,l.jsxs)(n.p,{children:["The ",(0,l.jsx)(n.code,{children:"envs"})," property can contain different action types per environment:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:'tools:\n  - name: deploy\n    envs:\n      dev: "./scripts/deploy-dev.sh"     # Script file\n      staging: deploy_staging             # Python module\n      prod: "kubectl apply -f prod.yaml"  # Inline command\n'})}),"\n",(0,l.jsx)(n.p,{children:"Each environment's value goes through the same three-tier resolution."}),"\n",(0,l.jsx)(n.h2,{id:"action-resolution-examples",children:"Action Resolution Examples"}),"\n",(0,l.jsx)(n.h3,{id:"example-1-script-file",children:"Example 1: Script File"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"tools:\n  - name: backup\n    action: ./scripts/backup.sh\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Resolution:"})}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Tier 1"}),": Has ",(0,l.jsx)(n.code,{children:".sh"})," extension \u2192 Script file detected \u2713"]}),"\n",(0,l.jsxs)(n.li,{children:["Execute: ",(0,l.jsx)(n.code,{children:"sh ./scripts/backup.sh"})]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"example-2-python-module-custom",children:"Example 2: Python Module (Custom)"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"cli:\n  custom_tools_dir: ./tools\n\ntools:\n  - name: process\n    action: data_processor\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Resolution:"})}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Tier 1"}),": No file extension \u2192 Continue"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Tier 2"}),": Try import ",(0,l.jsx)(n.code,{children:"./tools/data_processor.py"})," \u2192 Found \u2713"]}),"\n",(0,l.jsxs)(n.li,{children:["Execute: ",(0,l.jsx)(n.code,{children:"data_processor.main(tool, env, env_args, cli_args)"})]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"example-3-python-module-built-in",children:"Example 3: Python Module (Built-in)"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"tools:\n  - name: docs\n    type: web\n    action: open_link\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Resolution:"})}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Tier 1"}),": No file extension \u2192 Continue"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Tier 2"}),": Try import ",(0,l.jsx)(n.code,{children:"custom_tools/open_link.py"})," \u2192 Not found"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Tier 2"}),": Try import ",(0,l.jsx)(n.code,{children:"hexagon.actions.external.open_link"})," \u2192 Found \u2713"]}),"\n",(0,l.jsxs)(n.li,{children:["Execute: ",(0,l.jsx)(n.code,{children:"open_link.main(tool, env, env_args, cli_args)"})]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"example-4-inline-command",children:"Example 4: Inline Command"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"tools:\n  - name: status\n    action: git status --short\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Resolution:"})}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Tier 1"}),": No file extension \u2192 Continue"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Tier 2"}),": Try import ",(0,l.jsx)(n.code,{children:"git"})," \u2192 Not found (ModuleNotFoundError)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Tier 3"}),": Execute as inline command \u2713"]}),"\n",(0,l.jsxs)(n.li,{children:["Execute: ",(0,l.jsx)(n.code,{children:"git status --short"})]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"example-5-format-string",children:"Example 5: Format String"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:'tools:\n  - name: open\n    action: "open {env_args}"\n    envs:\n      docs: https://docs.example.com\n      dashboard: https://dashboard.example.com\n'})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Resolution:"})}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Tier 1"}),": No file extension \u2192 Continue"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Tier 2"}),": Try import ",(0,l.jsx)(n.code,{children:"open {env_args}"})," \u2192 Not found"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Tier 3"}),": Execute as inline command \u2713"]}),"\n",(0,l.jsxs)(n.li,{children:["Apply format substitution: ",(0,l.jsx)(n.code,{children:"open https://docs.example.com"})]}),"\n",(0,l.jsxs)(n.li,{children:["Execute: ",(0,l.jsx)(n.code,{children:"open https://docs.example.com"})]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"debugging-action-resolution",children:"Debugging Action Resolution"}),"\n",(0,l.jsx)(n.h3,{id:"add-debug-output",children:"Add Debug Output"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"tools:\n  - name: test\n    action: \"echo 'Action: {tool.action}' && echo 'Args: {env_args}'\"\n"})}),"\n",(0,l.jsx)(n.h3,{id:"check-module-import",children:"Check Module Import"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'# Test import manually\nimport sys\nsys.path.append("./custom_tools")\n\ntry:\n    import my_module\n    print("Module found!")\n    print(dir(my_module))  # Check if \'main\' exists\nexcept ModuleNotFoundError:\n    print("Module not found!")\n'})}),"\n",(0,l.jsx)(n.h3,{id:"verify-script-path",children:"Verify Script Path"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Check if script exists\nls -la scripts/deploy.sh\n\n# Check if executable\nfile scripts/deploy.sh\n\n# Test script directly\nsh scripts/deploy.sh\n"})}),"\n",(0,l.jsx)(n.h3,{id:"enable-python-verbosity",children:"Enable Python Verbosity"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"python -v -m hexagon\n# Shows all module imports\n"})}),"\n",(0,l.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,l.jsx)(n.h3,{id:"choose-the-right-action-type",children:"Choose the Right Action Type"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Scenario"}),(0,l.jsx)(n.th,{children:"Best Type"}),(0,l.jsx)(n.th,{children:"Why"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"Simple commands"}),(0,l.jsx)(n.td,{children:"Inline"}),(0,l.jsx)(n.td,{children:"Quick, no extra files"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"Complex shell logic"}),(0,l.jsx)(n.td,{children:"Script file"}),(0,l.jsx)(n.td,{children:"Better error handling, reusable"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"Python logic"}),(0,l.jsx)(n.td,{children:"Python module"}),(0,l.jsx)(n.td,{children:"Full language features, testable"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"Dynamic commands"}),(0,l.jsx)(n.td,{children:"Format string"}),(0,l.jsx)(n.td,{children:"Environment-specific, flexible"})]})]})]}),"\n",(0,l.jsx)(n.h3,{id:"naming-conventions",children:"Naming Conventions"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Scripts"}),": Use descriptive names (",(0,l.jsx)(n.code,{children:"deploy-production.sh"}),", not ",(0,l.jsx)(n.code,{children:"dp.sh"}),")"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Python modules"}),": Use Python naming (",(0,l.jsx)(n.code,{children:"data_processor"}),", not ",(0,l.jsx)(n.code,{children:"data-processor"}),")"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Commands"}),": Use full command names for clarity"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"error-handling",children:"Error Handling"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"In scripts:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"#!/bin/bash\nset -e  # Exit on first error\nset -u  # Exit on undefined variable\n\n# Your script code\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"In Python modules:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'from hexagon.domain.hexagon_error import HexagonError\n\ndef main(tool, env, env_args, cli_args):\n    try:\n        # Your code\n        return ["Success"]\n    except Exception as e:\n        raise HexagonError(f"Operation failed: {e}")\n'})}),"\n",(0,l.jsx)(n.h3,{id:"path-management",children:"Path Management"}),"\n",(0,l.jsx)(n.p,{children:"Always use paths relative to the config file:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"cli:\n  custom_tools_dir: ./tools  # Relative to app.yaml\n\ntools:\n  - name: deploy\n    action: ./scripts/deploy.sh  # Relative to app.yaml\n"})}),"\n",(0,l.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"../api/actions/shell",children:"Shell Actions API"})," - Script execution details"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"custom-tools",children:"Custom Tools"})," - Python module development"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"../guides/tool-types",children:"Tool Types Guide"})," - Overview of all tool types"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"../guides/troubleshooting",children:"Troubleshooting"})," - Debugging action issues"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(a,{...e})}):a(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>t});var s=i(6540);const l={},o=s.createContext(l);function r(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);