"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[7684],{2805:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>d,contentTitle:()=>i,default:()=>c,frontMatter:()=>r,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"api/support/storage","title":"Storage API","description":"Hexagon provides a storage system for persisting data between CLI invocations. This page documents the storage API and how to use it in your custom tools and plugins.","source":"@site/docs/api/support/storage.md","sourceDirName":"api/support","slug":"/api/support/storage","permalink":"/hexagon/docs/api/support/storage","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/api/support/storage.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"apiSidebar","previous":{"title":"Hooks API","permalink":"/hexagon/docs/api/support/hooks"}}');var a=s(4848),o=s(8453);const r={sidebar_position:3},i="Storage API",d={},l=[{value:"Storage Module",id:"storage-module",level:2},{value:"Storage Functions",id:"storage-functions",level:2},{value:"store_user_data",id:"store_user_data",level:3},{value:"get_user_data",id:"get_user_data",level:3},{value:"HexagonStorageKeys",id:"hexagonstoragekeys",level:2},{value:"Storage Location",id:"storage-location",level:2},{value:"Examples",id:"examples",level:2},{value:"Storing User Preferences",id:"storing-user-preferences",level:3},{value:"Storing Tool State",id:"storing-tool-state",level:3},{value:"Tracking Tool Usage",id:"tracking-tool-usage",level:3},{value:"Best Practices",id:"best-practices",level:2}];function u(e){const t={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"storage-api",children:"Storage API"})}),"\n",(0,a.jsx)(t.p,{children:"Hexagon provides a storage system for persisting data between CLI invocations. This page documents the storage API and how to use it in your custom tools and plugins."}),"\n",(0,a.jsx)(t.h2,{id:"storage-module",children:"Storage Module"}),"\n",(0,a.jsxs)(t.p,{children:["The ",(0,a.jsx)(t.code,{children:"hexagon.support.storage"})," module provides functions for storing and retrieving data:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:'from hexagon.support.storage import (\n    store_user_data,\n    get_user_data,\n    HexagonStorageKeys\n)\n\n# Store data\nstore_user_data("my_key", "my_value")\n\n# Retrieve data\nvalue = get_user_data("my_key")\nprint(value)  # "my_value"\n'})}),"\n",(0,a.jsx)(t.h2,{id:"storage-functions",children:"Storage Functions"}),"\n",(0,a.jsx)(t.h3,{id:"store_user_data",children:"store_user_data"}),"\n",(0,a.jsx)(t.p,{children:"Stores a value with the specified key:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:'from hexagon.support.storage import store_user_data\n\nstore_user_data("my_key", "my_value")\n'})}),"\n",(0,a.jsx)(t.h3,{id:"get_user_data",children:"get_user_data"}),"\n",(0,a.jsx)(t.p,{children:"Retrieves a value with the specified key:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:'from hexagon.support.storage import get_user_data\n\nvalue = get_user_data("my_key")\nprint(value)  # "my_value"\n'})}),"\n",(0,a.jsxs)(t.p,{children:["If the key doesn't exist, ",(0,a.jsx)(t.code,{children:"get_user_data"})," returns ",(0,a.jsx)(t.code,{children:"None"})," by default. You can specify a default value to return instead:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:'value = get_user_data("non_existent_key", default="default_value")\nprint(value)  # "default_value"\n'})}),"\n",(0,a.jsx)(t.h2,{id:"hexagonstoragekeys",children:"HexagonStorageKeys"}),"\n",(0,a.jsxs)(t.p,{children:["Hexagon defines a set of standard storage keys in the ",(0,a.jsx)(t.code,{children:"HexagonStorageKeys"})," enum:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:'from hexagon.support.storage import HexagonStorageKeys\n\n# Store the last command\nstore_user_data(HexagonStorageKeys.last_command.value, "my-cli tool")\n\n# Retrieve the last command\nlast_command = get_user_data(HexagonStorageKeys.last_command.value)\nprint(last_command)  # "my-cli tool"\n'})}),"\n",(0,a.jsx)(t.h2,{id:"storage-location",children:"Storage Location"}),"\n",(0,a.jsx)(t.p,{children:"Hexagon stores data in a JSON file in the user's home directory. The location depends on the operating system:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Linux/macOS"}),": ",(0,a.jsx)(t.code,{children:"~/.hexagon/storage.json"})]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Windows"}),": ",(0,a.jsx)(t.code,{children:"%USERPROFILE%\\.hexagon\\storage.json"})]}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"examples",children:"Examples"}),"\n",(0,a.jsx)(t.h3,{id:"storing-user-preferences",children:"Storing User Preferences"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:'from hexagon.support.storage import store_user_data, get_user_data\n\ndef set_preference(key, value):\n    """Set a user preference."""\n    store_user_data(f"preference.{key}", value)\n    return [f"Preference \'{key}\' set to \'{value}\'"]\n\ndef get_preference(key):\n    """Get a user preference."""\n    value = get_user_data(f"preference.{key}", default="Not set")\n    return [f"Preference \'{key}\' is \'{value}\'"]\n'})}),"\n",(0,a.jsx)(t.h3,{id:"storing-tool-state",children:"Storing Tool State"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:'from hexagon.support.storage import store_user_data, get_user_data\nimport json\n\ndef save_state(state):\n    """Save tool state."""\n    store_user_data("tool_state", json.dumps(state))\n    return ["State saved"]\n\ndef load_state():\n    """Load tool state."""\n    state_json = get_user_data("tool_state")\n    if state_json:\n        state = json.loads(state_json)\n        return [f"State loaded: {state}"]\n    else:\n        return ["No state found"]\n'})}),"\n",(0,a.jsx)(t.h3,{id:"tracking-tool-usage",children:"Tracking Tool Usage"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:'from hexagon.support.storage import store_user_data, get_user_data\nfrom hexagon.support.hooks import HexagonHooks\nimport json\nimport time\n\ndef setup(cli, tools, envs):\n    HexagonHooks.end.register(track_usage)\n\ndef track_usage(cli, tools, envs, selected_tool=None):\n    if not selected_tool:\n        return\n    \n    # Get existing usage data\n    usage_json = get_user_data("tool_usage", default="{}")\n    usage = json.loads(usage_json)\n    \n    # Update usage data\n    tool_name = selected_tool.name\n    if tool_name not in usage:\n        usage[tool_name] = 0\n    usage[tool_name] += 1\n    \n    # Store updated usage data\n    store_user_data("tool_usage", json.dumps(usage))\n'})}),"\n",(0,a.jsx)(t.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Use Namespaced Keys"}),": Prefix your keys with a namespace to avoid conflicts"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Handle Missing Data"}),": Always handle the case where data doesn't exist"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Store Simple Data"}),": Store simple data types or JSON-serializable objects"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Document Your Storage"}),": Document what data you store and why"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Clean Up"}),": Remove data when it's no longer needed"]}),"\n"]})]})}function c(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(u,{...e})}):u(e)}},8453:(e,t,s)=>{s.d(t,{R:()=>r,x:()=>i});var n=s(6540);const a={},o=n.createContext(a);function r(e){const t=n.useContext(o);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),n.createElement(o.Provider,{value:t},e.children)}}}]);